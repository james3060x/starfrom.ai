(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[979],{8216:function(e,s,a){Promise.resolve().then(a.bind(a,6650)),Promise.resolve().then(a.bind(a,143))},6650:function(e,s,a){"use strict";a.d(s,{ModuleSelector:function(){return j}});var t=a(7437),i=a(2265),n=a(9820),l=a(8245),r=a(6700),c=a(5060),d=a(9174),m=a(2135),x=a(875),o=a(401),p=a(8933),h=a(2371),u=a(8705);function f(e){var s,a;let{module:r,selected:c,onSelect:p,disabled:h}=e,[u,f]=(0,i.useState)(!1),j=r.features||[];return(0,t.jsx)(n.Zb,{className:"border-2 transition-all cursor-pointer ".concat(c?"border-[#06b6d4] bg-[#06b6d4]/5":"border-transparent hover:border-gray-200"," ").concat(h?"opacity-60 cursor-not-allowed":""),onClick:()=>!h&&p(),children:(0,t.jsx)(n.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)(l.X,{checked:c,disabled:h,className:"mt-1"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-2xl",children:r.icon}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:r.name})]}),(0,t.jsx)(d.C,{variant:"outline",children:r.category})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:r.description}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,t.jsxs)("span",{className:"font-bold text-[#1e3a5f]",children:["\xa5",null===(s=r.price_min)||void 0===s?void 0:s.toLocaleString()," - ",null===(a=r.price_max)||void 0===a?void 0:a.toLocaleString()]}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:r.price_unit})]}),(0,t.jsx)("span",{className:"text-xs text-gray-400",children:r.delivery_days})]}),j.length>0&&(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),f(!u)},className:"flex items-center gap-1 text-sm text-[#06b6d4] hover:underline",children:[u?"收起":"查看详情",u?(0,t.jsx)(m.Z,{className:"w-4 h-4"}):(0,t.jsx)(x.Z,{className:"w-4 h-4"})]}),u&&(0,t.jsx)("div",{className:"mt-3 space-y-2",children:j.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(o.Z,{className:"w-4 h-4 text-[#06b6d4] mt-0.5 flex-shrink-0"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:e})]},s))})]})]})]})})})}function j(){let[e,s]=(0,i.useState)([]),[a,l]=(0,i.useState)(!0),{selectedModules:m,addModule:x,removeModule:o}=(0,h.W)();(0,i.useEffect)(()=>{!async function(){try{let e;let a=(0,p.e)(),{data:t,error:i}=await a.from("service_modules").select("*").eq("is_active",!0).order("sort_order",{ascending:!0});i?(console.warn("Supabase fetch failed, using fallback data:",i.message),e=u.dn):e=t&&t.length>0?t:u.dn,s(e)}catch(e){console.warn("Supabase connection failed, using fallback data:",e),s(u.dn)}l(!1)}()},[]);let j=e.find(e=>"base"===e.type),b=e.filter(e=>"plugin"===e.type),N=e.filter(e=>"subscription"===e.type),g=m.find(e=>"subscription"===e.type),y=e=>{m.find(s=>s.id===e.id)?o(e.id):x({id:e.id,name:e.name,type:e.type,priceMin:e.price_min||0,priceMax:e.price_max||0,priceUnit:e.price_unit||""})};return a?(0,t.jsx)("div",{className:"space-y-4",children:[1,2,3,4,5].map(e=>(0,t.jsx)("div",{className:"h-32 bg-gray-200 rounded-lg animate-pulse"},e))}):(0,t.jsxs)("div",{className:"space-y-8",children:[j&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"\uD83E\uDDF1"}),"基础模块（必选）"]}),(0,t.jsx)(f,{module:j,selected:!0,onSelect:()=>{},disabled:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"\uD83D\uDD0C"}),"增值模块（按需勾选）"]}),(0,t.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,t.jsx)(f,{module:e,selected:!!m.find(s=>s.id===e.id),onSelect:()=>y(e)},e.id))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"\uD83D\uDD04"}),"持续服务（可选 1 档）"]}),(0,t.jsx)(r.E,{value:null==g?void 0:g.id,onValueChange:s=>{let a=m.find(e=>"subscription"===e.type);if(a&&o(a.id),s){let a=e.find(e=>e.id===s);a&&x({id:a.id,name:a.name,type:a.type,priceMin:a.price_min||0,priceMax:a.price_max||0,priceUnit:a.price_unit||""})}},className:"space-y-4",children:N.map(e=>{var s;return(0,t.jsx)(n.Zb,{className:"border-2 transition-all cursor-pointer ".concat((null==g?void 0:g.id)===e.id?"border-[#06b6d4] bg-[#06b6d4]/5":"border-transparent hover:border-gray-200"),children:(0,t.jsx)(n.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)(r.m,{value:e.id,id:e.id,className:"mt-1"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)(c._,{htmlFor:e.id,className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("span",{className:"text-2xl",children:e.icon}),(0,t.jsx)("span",{className:"font-semibold",children:e.name}),(0,t.jsx)(d.C,{variant:"outline",children:e.category})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1 ml-8",children:e.description}),(0,t.jsxs)("div",{className:"flex items-baseline gap-1 mt-2 ml-8",children:[(0,t.jsxs)("span",{className:"font-bold text-[#1e3a5f]",children:["\xa5",null===(s=e.price_min)||void 0===s?void 0:s.toLocaleString()]}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:e.price_unit})]})]})]})})},e.id)})})]})]})}},143:function(e,s,a){"use strict";a.d(s,{PriceSummaryBar:function(){return m}});var t=a(7437),i=a(9820),n=a(2381),l=a(2489),r=a(6858),c=a(2371),d=a(7648);function m(){let{selectedModules:e,removeModule:s,totalMinPrice:a,totalMaxPrice:m,monthlyPrice:x}=(0,c.W)(),o=e.filter(e=>"subscription"!==e.type),p=e.find(e=>"subscription"===e.type),h=a(),u=m(),f=x();return(0,t.jsxs)(i.Zb,{className:"sticky top-24 border-0 shadow-xl",children:[(0,t.jsx)("div",{className:"h-1 bg-gradient-to-r from-[#06b6d4] to-[#1e3a5f]"}),(0,t.jsx)(i.Ol,{className:"pb-2",children:(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"价格汇总"})}),(0,t.jsx)(i.aY,{children:0===o.length?(0,t.jsx)("p",{className:"text-gray-500 text-center py-8",children:"请选择模块"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-3 mb-6 max-h-64 overflow-y-auto",children:[o.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-700",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"text-gray-500",children:["\xa5",e.priceMin.toLocaleString()," - ",e.priceMax.toLocaleString()]}),"base"!==e.type&&(0,t.jsx)("button",{onClick:()=>s(e.id),className:"text-gray-400 hover:text-red-500",children:(0,t.jsx)(l.Z,{className:"w-4 h-4"})})]})]},e.id)),p&&(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm pt-3 border-t",children:[(0,t.jsx)("span",{className:"text-gray-700",children:p.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"text-gray-500",children:["\xa5",p.priceMin.toLocaleString(),"/月"]}),(0,t.jsx)("button",{onClick:()=>s(p.id),className:"text-gray-400 hover:text-red-500",children:(0,t.jsx)(l.Z,{className:"w-4 h-4"})})]})]})]}),(0,t.jsxs)("div",{className:"border-t pt-4 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"一次性费用"}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("span",{className:"text-2xl font-bold text-[#1e3a5f]",children:["\xa5",h.toLocaleString()," - ",u.toLocaleString()]})})]}),f>0&&(0,t.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"月度费用"}),(0,t.jsxs)("span",{className:"text-lg font-semibold text-[#06b6d4]",children:["\xa5",f.toLocaleString(),"/月"]})]})]}),(0,t.jsx)(d.default,{href:"/contact?source=pricing",children:(0,t.jsxs)(n.z,{className:"w-full mt-6 bg-[#06b6d4] hover:bg-[#0891b2]",size:"lg",children:["获取精准报价",(0,t.jsx)(r.Z,{className:"ml-2 w-4 h-4"})]})}),(0,t.jsx)("p",{className:"text-xs text-gray-400 text-center mt-3",children:"最终价格根据具体需求评估"})]})})]})}},6700:function(e,s,a){"use strict";a.d(s,{E:function(){return c},m:function(){return d}});var t=a(7437),i=a(2265),n=a(2325),l=a(519),r=a(3448);let c=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(n.fC,{className:(0,r.cn)("grid gap-2",a),...i,ref:s})});c.displayName=n.fC.displayName;let d=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(n.ck,{ref:s,className:(0,r.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),...i,children:(0,t.jsx)(n.z$,{className:"flex items-center justify-center",children:(0,t.jsx)(l.Z,{className:"h-3.5 w-3.5 fill-primary"})})})});d.displayName=n.ck.displayName},8933:function(e,s,a){"use strict";a.d(s,{e:function(){return i}});var t=a(8280);function i(){return(0,t.eI)("https://ccesxdggmqrbfgsunsod.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNjZXN4ZGdnbXFyYmZnc3Vuc29kIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk2ODQ0NDIsImV4cCI6MjA1NTI2MDQ0Mn0.3lrXy5dJHNE6lMAbh8L_z81_wFrwjj2jHClTmGDvboE")}}},function(e){e.O(0,[851,280,7,451,600,661,914,44,971,117,744],function(){return e(e.s=8216)}),_N_E=e.O()}]);